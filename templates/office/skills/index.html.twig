{% extends 'office/base.html.twig' %}

{% block contenu %}

    {% for message in app.flashes('success') %}
        <div id="successes">
            {{ message }}
        </div>
    {% endfor %}

    {% for message in app.flashes('error') %}
        <div id="errors">
            {{ message }}
        </div>
    {% endfor %}

    <a class="small_link" href="{{ path('office') }}">&lt;&lt; Retour</a>

    <h3>Mes compétences</h3>

    <div style="display: flex; justify-content: center; margin-bottom: 20px;">
        <button class="btn btn-success" onclick="location.href='{{ path('add_skill_category')}}'" >
            Ajouter une catégorie
        </button>
    </div>
    {% set i = 0 %}
        {% for category in categories %}
            {% if i == 2 %}
                {% set i = 0 %}
            {% endif %}

            {% if i == 0 %}
                <div class="row">
            {% endif %}
            {% set rows = category.skillRows %}
            <table class="table table-striped table-bordered skill-table col">
                <tr>
                    <th>{{ category.title }}</th>
                <tr>

                <td>
                    {% if category.iconPath %}
                        <img class="skill_icon" src="{{ asset(category.iconPath) }}">
                    {% else %}
                        <span class="oi oi-x" aria-hidden="true"></span>
                        <i>Pas d'icône</i>
                    {% endif %}
                </td>

                {% for row in rows %}
                    <tr>
                        <td>
                            {{ row.text|raw }}
                            <div style="display: inline-block">
                                        <span onclick="location.href='{{ path('edit_skill_row', {'id' : row.id}) }}'"
                                              class="oi oi-pencil edit_button ml-2" title="Modifier" aria-hidden="true"></span>
                                <span onclick="location.href='{{ path('delete_skill_row', {'id' : row.id}) }}'"
                                      class="oi oi-x delete_button ml-1" title="Supprimer" aria-hidden="true"></span>
                            </div>
                            <br />
                        </td>
                    </tr>
                {% endfor %}

                <tr>
                    <td>
                        <button class="btn btn-success" onclick="location.href='{{ path('add_skill_row')}}'" >
                            Ajouter une ligne
                        </button>
                        <button class="btn btn-warning" onclick="location.href='{{ path('edit_skill_category', {'id' : category.id}) }}'">
                            Modifier catégorie
                        </button>
                        <button class="btn btn-danger" onclick="location.href='{{ path('delete_skill_category', {'id' : category.id}) }}'">
                            Supprimer catégorie
                        </button>
                    </td>
                </tr>
            </table>
            {% set i = i + 1 %}
            {% if i == 2 %}
                </div>
            {% endif %}
        {% endfor %}

{% endblock %}
